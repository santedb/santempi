<div xmlns="http://www.w3.org/1999/xhtml" xmlns:sdb="http://santedb.org/applet">
    <sdb:widget order="0" name="ui.mpi.matches.config.scoring.properties" type="Panel" size="Large" altViews="Edit"
        headerClass="alert-info" context="org.santedb.mpi.matches.config.scoring">
        <sdb:icon>fas fa-list-alt</sdb:icon>
        <sdb:description lang="en">Properties</sdb:description>
    </sdb:widget>

    <div class="container-fluid" ng-if="panel.view != 'Edit'">
        <div class="accordion" id="scoreAccordion">
            <div class="card shadow" ng-repeat="score in scopedObject.scoring track by $index">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        <button type="button" class="collapse-indicator btn btn-link p-0" data-toggle="collapse"
                            data-target="#score{{$index}}">
                            <i class="fas fa-star-half-alt"></i>
                            <span class="ml-2" ng-switch="score.id">
                                <span ng-switch-when="undefined">Attribute{{$index}}</span>
                                <span ng-switch-default="ng-switch-default">{{ score.id }}</span>
                            </span> ({{ score.property.join("|")}})
                            <i class="fas fa-chevron-right fa-fw"></i>
                        </button>
                    </h5>
                </div>
                <div class="collapse" id="score{{$index}}" data-parent="#scoreAccordion">
                    <div class="card-body container-fluid">
                        <div class="row">
                            <div class="col">
                                <!-- HACK: m-auto should be here but m-auto does nothing -->
                                <center>
                                    <div class="scoreDiagramDiv" id="scoringConfigurationDiv{{$index}}"></div>
                                    <div class="scoreDiagramSvg" id="scoringConfigurationSvg{{$index}}"><i
                                            class="fas fa-spin fa-circle-notch"></i> {{ 'ui.wait' | i18n }}</div>
                                </center>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <div class="container">
                                    <div class="row" >
                                        <label ng-if="score.id" class="control-label col-sm-12 col-md-3">{{ 'ui.model.matchConfiguration.scoring.id' | i18n }} <hint-popover hint-title='ui.model.matchConfiguration.scoring.id' /></label>
                                        <div  ng-if="score.id" class="col-sm-12 col-md-9">{{ score.id }} </div>
                                        <label class="control-label col-sm-12 col-md-3">{{ 'ui.model.matchConfiguration.scoring.property' | i18n }} <hint-popover hint-title='ui.model.matchConfiguration.scoring.property' /></label>
                                        <div class="col-sm-12 col-md-9">
                                            <ul class="list-group">
                                                <li ng-repeat="p in score.property" class="list-group-item">{{p}}</li>
                                            </ul>
                                        </div>
                                        <label class="control-label col-sm-12 col-md-3">{{ 'ui.model.matchConfiguration.scoring.whenNull' | i18n }} <hint-popover hint-title='ui.model.matchConfiguration.scoring.whenNull' /></label>
                                        <div  class="col-sm-12 col-md-9"> {{ score.whenNull }} - <span class="text-info"><i class="fas fa-info-circle"></i> {{ 'ui.model.matchConfiguration.scoring.whenNull.' + score.whenNull | i18n }}</span> </div>
                                        <label ng-if="score.when.length" class="control-label col-sm-12 col-md-3">{{ 'ui.model.matchConfiguration.scoring.when' | i18n }} <hint-popover hint-title='ui.model.matchConfiguration.scoring.when' /></label>
                                        <div ng-if="score.when.length"  class="col-sm-12 col-md-9"> 
                                            <ul class="list-group">
                                                <li ng-repeat="w in score.when" class="list-group-item"><a data-target="#score{{w.ref}}" data-toggle="collapse"><i class="fas fa-star-half-alt"></i> {{ w.ref }}</a> {{ w.op }} {{ w.value }}</li>
                                            </ul>
                                        </div>
                                        <div class="col-12">
                                            <hr/>
                                        </div>
                                        <label class="control-label col-sm-6 col-md-3">{{ 'ui.model.matchConfiguration.scoring.M' | i18n }}
                                            <hint-popover hint-title='ui.model.matchConfiguration.scoring.M' />
                                        </label>
                                        <div class="col-sm-6 col-md-3">{{ score.m | number: 4 }} </div>
                                        <label class="control-label col-sm-6 col-md-3">{{ 'ui.model.matchConfiguration.scoring.U' | i18n }}
                                            <hint-popover hint-title='ui.model.matchConfiguration.scoring.U' />
                                        </label>
                                        <div class="col-sm-6 col-md-3">{{ score.u | number: 4 }} </div>
                                        <label class="control-label col-sm-6 col-md-3">{{ 'ui.model.matchConfiguration.scoring.matchWeight' | i18n }}
                                            <hint-popover hint-title='ui.model.matchConfiguration.scoring.matchWeight' />

                                        </label>
                                        <div class="col-sm-6 col-md-3">{{ score.matchWeight | number: 4 }}</div>
                                        <label class="control-label col-sm-6 col-md-3">{{ 'ui.model.matchConfiguration.scoring.nonMatchWeight' | i18n }}
                                            <hint-popover hint-title='ui.model.matchConfiguration.scoring.nonMatchWeight' />

                                        </label>
                                        <div class="col-sm-6 col-md-3">{{ score.nonMatchWeight | number: 4 }}</div>
                                        <div class="col-12">
                                            <hr/>
                                        </div>
                                        
                                </div>
                                </div>
                            </div>
                        </div>
                       
                    </div>
                </div>

            </div>
        </div>
    </div>

</div>