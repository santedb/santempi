<div xmlns="http://www.w3.org/1999/xhtml" xmlns:sdb="http://santedb.org/applet" class="container-fluid p-0"
    oc-lazy-load="{ name: 'recentPatientsController', files: ['/org.santedb.smpi/controllers/widgets/recentPatients.js', '/org.santedb.smpi/js/mpi.js'] }">
    <sdb:widget order="15" name="ui.mpi.dashboard.patients.recent" altViews="Edit" headerClass="bl-light" size="Large"
        type="Panel" context="org.santedb.patient.recent" priority="1">
        <sdb:icon>fas fa-users</sdb:icon>
        <sdb:description lang="en">Recent Patients</sdb:description>
    </sdb:widget>
    <div class="row" ng-if="!scopedObject">
        <div class="col">
            <p class="m-auto"><i class="fas fa-circle-notch fa-spin"></i> {{ 'ui.wait' | i18n }}</p>
        </div>
    </div>

    <div ng-controller="recentPatientsController">
        <div class="col-lg-3 col-sm-6">
            <div class="row">
                <div class="col-12">
                    <report-view id="'org.santedb.bi.core.reports.patient.age'" view="'chart'" legend="true" parameters="{}"/>
                </div>
            </div>
            <div class="row">
                <div class="col-12">
                    <report-view id="'org.santedb.bi.core.reports.patient.gender'" 
                        view="'chart'" legend="true" parameters="{}"/>
                </div>
            </div>
            <div class="row">
                <div class="col-12">
                    <report-view id="'org.santedb.bi.core.reports.patient.regDate'" 
                        view="'chart'" legend="true" parameters="{}"/>
                </div>
            </div>
        </div>

        <div class="col-lg-9 col-sm-6">
            <div class="row">
                <entity-table id="recentPatientTable" type="Patient" search-field="name.component.value"
                    default-query="recentPatientQuery" i18n-prefix="'ui.model.patient.'"
                    render="{ 'name': renderName, 'dateOfBirth': renderDob, 'genderConcept': renderGender, 'identifier': renderIdentifier }"
                    properties="[ 'name', 'dateOfBirth', 'genderConcept', 'identifier', 'creationTime' ]"
                    item-actions="[ { name: 'view', demand: '1.3.6.1.4.1.33349.3.1.5.9.2.2.3', sref: 'santedb-admin.mpi.patients.view', className: 'btn-primary', icon: 'fas fa-arrow-right' } ]"
                    actions="[ { name: 'mpiSearch', demand: '1.3.6.1.4.1.33349.3.1.5.9.2.2.3', sref: 'santedb-admin.mpi.patients.search', className: 'btn-primary', icon: 'fa fa-search-plus' }]">
                </entity-table>
            </div>
        </div>

    </div>
</div>